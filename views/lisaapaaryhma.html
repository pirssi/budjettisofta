<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    .divider {
      width: 40px;
      height: auto;
      display: inline-block;
    }

    .logoutbtnPos {
      position: fixed;
      right: 10px;
      top: 10px;
    }
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>

    var userId = <%= userId %> ; //huutaa erroreita, mut toimii
    var budgetId;

    $(function () {
      fetchBudgets();
    });

    function selectBudget() {
      budgetId = $("#budjetit :selected").val();
    }


    function fetchBudgets() {
      $.get(
        "/kayttajanbudjetit/" + userId,
        function (data, status, xhr) {
          $("#budjetit").append('<option value="-1">Valitse</option>');
          $.each(data, function (index, data) {
            $("#budjetit").append('<option value="' + data.Id + '">' + data.NIMI + "</option>");
          });
        })
    }

  </script>
  <title>Menojen kirjaaminen</title>
</head>

<body>
  <header>
    <h1>
      <center>Menojen kirjaaminen</center>
    </h1>
  </header>
  <br/>

  <% if (locals.msg) { %>
   <center><h2><%= msg %></h2></center> 
    <% } %>
    
  <br />
  <br />
  <form action="/lisaapaaryhma" method="POST">
    <div>
      <div class="col-md-4 col-md-offset-4" style="background-color:rgb(135, 165, 204); border-style:inherit; 
    padding-top: 25px;
    padding-right: 30px;
    padding-bottom: 30px;
    padding-left: 30px;
    border-radius: 25px;">
        <center>
          <p>
            Valitse budjetti:
            <select onchange="selectBudget()" id="budjetit" name="budjetit" class="form-control" required>
            </select>
          </p>
        </center>
        <br />

        <center>
          <p>Syötä pääryhmän nimi:
            <input type="text" class="form-control" id="nimi" name="nimi" minlength="3" maxlength="45"
              placeholder="Nimi" required />
          </p>
        </center>
        <br />

        <center>
          <div>
            <button onclick="location.href='/'" type="button" class="btn btn-primary"
              style="width: 180px; height: 40px;">
              Palaa etusivulle
            </button>

            <div class="divider"></div>

            <input type="submit" value="Hyväksy meno" class="btn btn-success" style="width: 180px; height: 40px;" />

          </div>
        </center>
      </div>
  </form>
  <center>
    <button onclick="location.href='/logout'" type="button" class="btn btn-danger logoutbtnPos">Kirjaudu ulos</button>
  </center>
</body>

</html>